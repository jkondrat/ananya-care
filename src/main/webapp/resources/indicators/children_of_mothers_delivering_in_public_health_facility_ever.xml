<indicator additive="false">
    <name>Number of children delivered in a public health facility, ever</name>
    <categories>
        <category name="Birth preparedness plan"/>
    </categories>
    <owners>
        <user login="mrcaretest@gmail.com"/>
        <roles>
            <role name="Manager"/>
        </roles>
    </owners>
    <trend>3</trend>
    <reports>
        <report type="Line Chart" label-x="Time" label-y="Value" />
    </reports>
    <area name="Bihar" level="State"/>
    <default-frequency>Daily</default-frequency>
    <numerator>
        <dw-query>
            <select-columns>
                <select-column aggregation="Count" fieldName="*" />
            </select-columns>
            <dimension tableName="child_case" />
            <combineWith type="Join" dimension-key="mother_id" foreign-key="id">
                <dw-query dimension-key="id" fact-key="case_id">
                    <select-columns>
                        <select-column tableName="mother_case" fieldName="id" />
                    </select-columns>
                    <dimension tableName="mother_case" />
                    <facts>
                        <fact>
                            <name>registration_mother_form</name>
                            <select-columns>
                                <select-column fieldName="case_id" />
                            </select-columns>
                            <where-group>
                                <where-condition type="valueComparison">
                                    <table-name>registration_mother_form</table-name>
                                    <field>where_born</field>
                                    <operator>=</operator>
                                    <value>hospital</value>
                                </where-condition>
                                <where-group>
                                    <where-condition type="valueComparison">
                                        <table-name>registration_mother_form</table-name>
                                        <field>which_hospital</field>
                                        <operator>=</operator>
                                        <value>block_phc</value>
                                    </where-condition>
                                </where-group>
                                <where-group join="OR">
                                    <where-condition type="valueComparison">
                                        <table-name>registration_mother_form</table-name>
                                        <field>which_hospital</field>
                                        <operator>=</operator>
                                        <value>district_hospital</value>
                                    </where-condition>
                                </where-group>
                            </where-group>
                        </fact>
                        <fact combine-type="Union">
                            <name>delivery_mother_form</name>
                            <select-columns>
                                <select-column fieldName="case_id" />
                            </select-columns>
                            <where-group>
                                <where-condition type="valueComparison">
                                    <table-name>delivery_mother_form</table-name>
                                    <field>where_born</field>
                                    <operator>=</operator>
                                    <value>hospital</value>
                                </where-condition>
                                <where-group>
                                    <where-condition type="valueComparison">
                                        <table-name>delivery_mother_form</table-name>
                                        <field>which_hospital</field>
                                        <operator>=</operator>
                                        <value>block_phc</value>
                                    </where-condition>
                                </where-group>
                                <where-group join="OR">
                                    <where-condition type="valueComparison">
                                        <table-name>delivery_mother_form</table-name>
                                        <field>which_hospital</field>
                                        <operator>=</operator>
                                        <value>district_hospital</value>
                                    </where-condition>
                                </where-group>
                            </where-group>
                        </fact>
                    </facts>
                </dw-query>
            </combineWith>
        </dw-query>
    </numerator>
</indicator>
