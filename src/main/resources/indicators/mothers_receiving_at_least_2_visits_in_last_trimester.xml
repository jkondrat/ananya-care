<indicator additive="false">
    <name>Mothers receiving at least 2 visits in last trimester</name>
    <categories>
        <category name="Birth preparedness plan"/>
    </categories>
    <owners>
        <reportviews>
            <reportview name="Program Manager"/>
        </reportviews>
    </owners>
    <trend>3</trend>
    <reports>
        <report type="Line Chart" label-x="Time" label-y="Value" />
    </reports>
    <default-frequency>Daily</default-frequency>
    <numerator>
        <dw-query dimension-key="id" fact-key="case_id">
            <select-columns>
                <select-column aggregation="Count" fieldName="*" />
            </select-columns>
            <dimension tableName="mother_case" />
            <facts>
                <fact>
                    <name>bp_form</name>
                    <select-columns>
                        <select-column fieldName="case_id" />
                        <select-column aggregation="Count" fieldName="case_id" />
                    </select-columns>
                    <where-group>
                        <where-condition type="valueComparison">
                            <table-name>bp_form</table-name>
                            <field>add_offset</field>
                            <operator>&lt;=</operator>
                            <value>90</value>
                        </where-condition>
                    </where-group>
                    <groupedByDimensionFactRowsNumber compSymbol=">=" value="2" groupBy="case_id" />
                </fact>
            </facts>
            <where-group>
                <where-condition type="period">
                    <table-name>mother_case</table-name>
                    <field>add</field>
                    <offset>-90</offset>
                </where-condition>
            </where-group>
        </dw-query>
    </numerator>
</indicator>
